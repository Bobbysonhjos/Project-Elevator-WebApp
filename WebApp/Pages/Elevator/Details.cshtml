@page "/Elevator/{elevatorId}"
@using System.Globalization
@model WebApp.Pages.Elevator.DetailsModel
@{
    ViewData["Title"] = "Details";
}



<div class="container shadow border rounded my-5 p-4 no-select bg-white">
    <div class="position-relative">
        <div class="position-absolute top-0 end-0">
            <a class="me-3 mt-1 no-anchor text-muted" 
               asp-page="/Elevator"
               asp-route-errands="@Model.Elevator.Errands" asp-route-elevatorId="@Model.Elevator">
            </a>
        </div>
    </div>
    <div class="row row-eq-height p-4">
        <div class="col-lg-6">
            <div class="row">
                <div class="col-sm-3">
                    <p class="fw-bold mb-0">Title</p>
                </div>
                <div class="col-sm-9">
                    <p class="text-muted mb-0">@Model.Elevator.Id</p>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3">
                    <p class="fw-bold mb-0 mt-4">Status</p>
                </div>
                <div class="col-sm-9">
                    <p class="text-muted mb-0 mt-4">@Model.Elevator.ElevatorStatus</p>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3">
                    <p class="fw-bold mb-0 mt-4">Created By</p>
                </div>
                <div class="col-sm-9">
                    <p class="text-muted mb-0 mt-4">@Model.Elevator.Location</p>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3">
                    <p class="fw-bold mb-0 mt-4">Assigned</p>
                </div>
                <div class="col-sm-9">
                    <p class="text-muted mb-0 mt-4">@Model.Elevator.CreatedDateUtc</p>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3">
                    <p class="fw-bold mb-0 mt-4">Created</p>
                </div>
                <div class="col-sm-9">
                    <p class="text-muted mb-0 mt-4">@Model.Elevator.CreatedDateUtc.ToString("yyyy-MM-dd HH:mm:ss", CultureInfo.InvariantCulture)</p>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="row">
                <div class="col-lg-12">
                    <p class="fw-bold">Elevator Operator</p>
                </div>
            </div>
            <div class="row mb-2 ps-2">
                <div class="col-lg-12 form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="elevatorEnabled">
                    <label class="form-check-label" for="elevatorEnabled">Elevator enabled</label>
                </div>
            </div>
            <div class="row mb-2 ps-2">
                <div class="col-lg-12 form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="check2">
                    <label class="form-check-label" for="check2">Open elevator door</label>
                </div>
            </div>
            <div class="row mb-3 me-2">
                <div class="col-lg-12">
                    <input type="checkbox" class="btn-check" id="btncheck2" autocomplete="off">
                    <label class="btn btn-outline-primary" for="btncheck2">Reset</label>
                </div>
            </div>
            <div class="row mb-3 me-2" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group me-2 mb-5" role="group" aria-label="First group">
                    <button type="button" class="btn btn-primary">Kv</button>
                    <button type="button" class="btn btn-primary">Bv</button>
                    <button type="button" class="btn btn-primary">1</button>
                    <button type="button" class="btn btn-primary">2</button>
                    <button type="button" class="btn btn-primary">3</button>
                    <button type="button" class="btn btn-primary">4</button>
                    <button type="button" class="btn btn-primary">5</button>
                </div>
            </div>
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <a class="btn btn-outline-primary" role="button" asp-page="/Errands/Create" asp-route-elevatorId="@Model.Elevator.Id">Create</a>
            </div>
        </div>
    </div>
    <div class="px-0 my-3 col-md-12 col-lg-12">
        <table class="table table-hover table-sm">
            <thead>
                <tr>
                    <th scope="col" style="width: 20%">
                        <a class="table-sort-link" asp-route-filter="@Model.Filter" asp-route-column="title" asp-route-order="@Model.SetOrder("title")" asp-route-searchQuery="@Model.SearchQuery" asp-route-pageSize="@Model.PageSize">Title</a><span class="fa @(Model.SetSortIcon("title"))"></span>
                    </th>
                    <th scope="col" style="width: 20%">
                        <a class="table-sort-link" asp-route-filter="@Model.Filter" asp-route-column="errandStatus" asp-route-order="@Model.SetOrder("errandstatus")" asp-route-searchQuery="@Model.SearchQuery" asp-route-pageSize="@Model.PageSize">Status</a><span class="fa @(Model.SetSortIcon("errandstatus"))"></span>
                    </th>
                    <th scope="col" style="width: 20%">
                        <a class="table-sort-link" asp-route-filter="@Model.Filter" asp-route-column="assignedToName" asp-route-order="@Model.SetOrder("assignedtoname")" asp-route-searchQuery="@Model.SearchQuery" asp-route-pageSize="@Model.PageSize">Assigned To</a><span class="fa @(Model.SetSortIcon("assignedtoname"))"></span>
                    </th>
                    <th scope="col" style="width: 20%">
                        <a class="table-sort-link" asp-route-filter="@Model.Filter" asp-route-column="createdByName" asp-route-order="@Model.SetOrder("createdbyname")" asp-route-searchQuery="@Model.SearchQuery" asp-route-pageSize="@Model.PageSize">Created By</a><span class="fa @(Model.SetSortIcon("createdbyname"))"></span>
                    </th>
                    <th scope="col" style="width: 20%">
                        <a class="table-sort-link" asp-route-filter="@Model.Filter" asp-route-column="createdDateUtc" asp-route-order="@Model.SetOrder("createddateutc")" asp-route-searchQuery="@Model.SearchQuery" asp-route-pageSize="@Model.PageSize">Created Date</a><span class="fa @(Model.SetSortIcon("createddateutc"))"></span>
                    </th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Elevator.Errands.Any())
                {
                    @foreach (var errand in Model.Elevator.Errands)
                    {
                        <tr class="cursor-pointer align-middle" style="height: 50px" onclick="location.href = '@Url.Page("/Errands/Details", new { ElevatorId = Model.Elevator.Id, ErrandId=errand.Id })'">
                            <td>@errand.Title</td>
                            <td>@errand.ErrandStatus</td>
                            <td>@errand.AssignedToName</td>
                            <td>@errand.CreatedByName</td>
                            <td>@errand.CreatedDateUtc.ToString("yyyy-MM-dd HH:mm:ss", CultureInfo.InvariantCulture)</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
    @if (Model.PaginationMetadata.TotalPageCount > 1)
    {
        <div class="container-fluid my-2">
            <div class="row pt-3">
                <div class="col text-center">
                    @if (Model.PaginationMetadata!.HasPrevious)
                    {
                        <a class="pagination-btn" asp-page="/Elevator/Details" asp-route-errands="@Model.Elevator.Errands" asp-route-errands="@Model.Elevator.Errands" asp-route-CurrentPage="@(Model.PaginationMetadata.CurrentPage - 1)" asp-route-PageSize="@Model.PaginationMetadata.PageSize">
                            <i class="fa-solid fa-angles-left fa-2xl"></i>
                        </a>
                    }
                </div>
                <div class="col text-center">
                    Page @Model.PaginationMetadata.CurrentPage of @Model.PaginationMetadata.TotalPageCount ( @Model.PaginationMetadata.TotalItemCount )
                </div>
                <div class="col text-center">
                    @if (Model.PaginationMetadata.HasNext)
                    {
                        <a class="pagination-btn" asp-page="/Errands/Details" asp-route-errands="@Model.Elevator.Errands" asp-route-errands="@Model.Elevator.Errands" asp-route-CurrentPage="@(Model.PaginationMetadata.CurrentPage + 1)" asp-route-PageSize="@Model.PaginationMetadata.PageSize">
                            <i class="fa-solid fa-angles-right fa-2xl"></i>
                        </a>
                    }
                </div>
            </div>
        </div>
    }
</div>

